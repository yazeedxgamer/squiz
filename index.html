<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>اختبار ميد احياء دقيقة</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #0056b3;
            --secondary-color: #007bff;
            --bg-color: #eef2f7;
            --card-bg-color: #ffffff;
            --text-color: #333;
            --light-text-color: #555;
            --border-color: #dbe2e9;
            --correct-color: #28a745;
            --incorrect-color: #dc3545;
            --correct-bg-color: #e9f7ef;
            --incorrect-bg-color: #fbebed;
        }

        *, *::before, *::after {
            box-sizing: border-box;
        }

        body {
            font-family: 'Tajawal', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            line-height: 1.8;
            margin: 0;
            padding: 2rem;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
        }

        .quiz-container {
            background-color: var(--card-bg-color);
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.08);
            width: 100%;
            max-width: 900px;
            opacity: 0;
            transform: translateY(20px);
            animation: fadeIn 0.8s ease-out forwards;
        }

        @keyframes fadeIn {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .quiz-header {
            padding: 2rem 2.5rem;
            border-bottom: 1px solid var(--border-color);
        }

        .quiz-header h1 {
            color: var(--primary-color);
            margin: 0;
            font-size: 2rem;
            font-weight: 800;
        }

        .progress-bar-container {
            background-color: #e9ecef;
            border-radius: 50px;
            height: 10px;
            margin-top: 1rem;
        }

        #progress-bar {
            width: 0%;
            height: 100%;
            background: linear-gradient(90deg, var(--secondary-color), var(--primary-color));
            border-radius: 50px;
            transition: width 0.4s ease-in-out;
        }
        
        #quiz-progress-text {
             font-size: 0.9rem;
             font-weight: 700;
             color: var(--light-text-color);
             margin-top: 0.5rem;
             text-align: left;
        }

        #quiz-body {
            padding: 2.5rem;
        }

        .question-block {
            margin-bottom: 2rem;
        }

        .question-header {
            font-weight: 700;
            font-size: 1.2rem;
            margin-bottom: 1.2rem;
            display: flex;
            align-items: center;
        }
        
        .feedback-icon {
            font-size: 1.5rem;
            margin-left: 0.75rem;
            font-weight: bold;
            line-height: 1;
        }
        .feedback-icon.correct { color: var(--correct-color); }
        .feedback-icon.incorrect { color: var(--incorrect-color); }

        .answers {
            display: grid;
            grid-template-columns: 1fr;
            gap: 0.8rem;
        }
        
        @media (min-width: 768px) {
            .answers {
                grid-template-columns: 1fr 1fr;
            }
        }

        .answer {
            display: flex;
            align-items: center;
            background-color: var(--bg-color);
            border: 2px solid var(--border-color);
            border-radius: 12px;
            padding: 1rem;
            cursor: pointer;
            transition: all 0.2s ease-out;
        }

        .answer:hover {
            border-color: var(--secondary-color);
            transform: translateY(-3px);
            box-shadow: 0 4px 15px rgba(0, 123, 255, 0.1);
        }

        .answer input[type="radio"] {
            margin-left: 1rem;
            flex-shrink: 0;
            width: 1.2em;
            height: 1.2em;
        }
        
        .answer.selected {
             border-color: var(--primary-color);
             background-color: #e7f1ff;
        }

        #submit-btn {
            background: linear-gradient(45deg, var(--secondary-color), var(--primary-color));
            color: white;
            border: none;
            padding: 1rem;
            border-radius: 12px;
            cursor: pointer;
            font-family: 'Tajawal', sans-serif;
            font-weight: 700;
            font-size: 1.2rem;
            width: 100%;
            margin-top: 1.5rem;
            transition: all 0.2s;
        }
        #submit-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0, 86, 179, 0.3);
        }
        #submit-btn:disabled {
            background: #adb5bd;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        #results-container { display: none; padding: 2.5rem; }
        
        .results-summary {
            text-align: center;
            padding: 2rem;
            border-radius: 15px;
            margin-bottom: 2rem;
        }
        .results-summary h2 { margin-top: 0; font-size: 2.2rem; font-weight: 800; }
        .results-summary p { font-size: 1.5rem; margin-bottom: 0; font-weight: 500; }
        
        .results-correct { background-color: var(--correct-bg-color); color: #0f5132; }
        .results-incorrect { background-color: var(--incorrect-bg-color); color: #842029; }
        
        #mistakes-review { border-top: 1px solid var(--border-color); padding-top: 2rem; }
        #mistakes-review h3 { text-align: center; font-size: 1.8rem; color: var(--primary-color); margin-top: 0; }
        .mistake-item { background-color: #fff; border: 1px solid var(--border-color); border-radius: 12px; padding: 1.5rem; margin-bottom: 1rem; }
        .mistake-item p { margin: 0 0 0.8rem 0; }
        .mistake-item strong { color: var(--primary-color); }
        .user-answer { color: var(--incorrect-color); font-weight: 700; }
        .correct-answer { color: var(--correct-color); font-weight: 700; }

        /* Final Feedback Styling */
        .answer.correct-final { background-color: var(--correct-bg-color); border-color: var(--correct-color); }
        .answer.incorrect-final.selected { background-color: var(--incorrect-bg-color); border-color: var(--incorrect-color); }
    </style>
</head>
<body>

    <div class="quiz-container">
        <div class="quiz-header">
            <h1>اختبار ميد احياء دقيقة</h1>
            <div class="progress-bar-container">
                <div id="progress-bar"></div>
            </div>
            <div id="quiz-progress-text">0 / 50</div>
        </div>
        <div id="quiz-body">
            </div>
        <div id="results-container">
            <div class="results-summary" id="results-summary">
                <h2 id="results-title"></h2>
                <p id="results-text"></p>
            </div>
            <div id="mistakes-review">
                <h3>راجع أخطاءك</h3>
                <div id="mistakes-list"></div>
            </div>
        </div>
        <div style="padding: 0 2.5rem 2.5rem 2.5rem;">
            <button id="submit-btn">إظهار النتيجة</button>
        </div>
    </div>

    <script>
        const quizContainer = document.getElementById('quiz-body');
        const submitButton = document.getElementById('submit-btn');
        const progressBar = document.getElementById('progress-bar');
        const progressText = document.getElementById('quiz-progress-text');
        
        const resultsContainer = document.getElementById('results-container');
        const resultsSummary = document.getElementById('results-summary');
        const resultsTitle = document.getElementById('results-title');
        const resultsText = document.getElementById('results-text');
        const mistakesReview = document.getElementById('mistakes-review');
        const mistakesList = document.getElementById('mistakes-list');

        const quizQuestions = [
            // Lecture 1 (10 questions)
            { question: "العالم الذي دحض نظرية التوالد الذاتي بشكل قاطع باستخدام دورق 'عنق الوزة' هو لويس باستور.", type: 'tf', correctAnswer: 'true' },
            { question: "من أهم إسهامات روبرت كوخ استخدام مادة ______ لتصليب الأوساط الزراعية.", type: 'mc', answers: { a: "الببتيدوجلايكان", b: "الأجار", c: "الديكستران", d: "الكحول" }, correctAnswer: 'b' },
            { question: "عملية البسترة تهدف إلى قتل الميكروبات عن طريق التسخين لدرجة 60 مئوية لمدة نصف ساعة.", type: 'tf', correctAnswer: 'true' },
            { question: "أي من التالي ليس من فوائد الكائنات الدقيقة؟", type: 'mc', answers: { a: "تثبيت النيتروجين", b: "إنتاج المضادات الحيوية", c: "التسبب بفساد الأغذية", d: "تحليل المواد العضوية" }, correctAnswer: 'c' },
            { question: "العالم الذي كان من أوائل من أبطل نظرية التوالد الذاتي بتجربته على اللحم والذباب هو:", type: 'mc', answers: { a: "لويس باستور", b: "روبرت كوخ", c: "فرانسيسكو ريدي", d: "روبرت هوك" }, correctAnswer: 'c' },
            { question: "علم الأحياء الدقيقة (Microbiology) يختص فقط بدراسة البكتيريا والفيروسات.", type: 'tf', correctAnswer: 'false' },
            { question: "اكتشف روبرت كوخ البكتيريا المسببة لمرض:", type: 'mc', answers: { a: "شلل الأطفال", b: "السل", c: "الملاريا", d: "السكري" }, correctAnswer: 'b' },
            { question: "'المعدنة' هي عملية تقوم بها الميكروبات لتحويل العناصر من صورة ______ إلى صورة ______ يستفيد منها النبات.", type: 'mc', answers: { a: "معدنية، عضوية", b: "غازية، سائلة", c: "عضوية، معدنية", d: "صلبة، غازية" }, correctAnswer: 'c' },
            { question: "روبرت هوك هو أول من شاهد أشكال البكتيريا باستخدام مجهره.", type: 'tf', correctAnswer: 'true' },
            { question: "من أضرار الكائنات الدقيقة استخدامها في الحرب البيولوجية.", type: 'tf', correctAnswer: 'true' },

            // Lecture 2 (10 questions)
            { question: "الجدار الخلوي في الخلايا حقيقية النواة (Eukaryotic) يحتوي على مادة الببتيدوجلايكان.", type: 'tf', correctAnswer: 'false' },
            { question: "في نظام التسمية الثنائية، اسم الجنس (Genus) يبدأ بحرف صغير.", type: 'tf', correctAnswer: 'false' },
            { question: "أي من التالي لا يعتبر من ممالك تصنيف وايتكر الخماسي؟", type: 'mc', answers: { a: "المونيرا", b: "البروتستا", c: "الفيروسات", d: "الحيوان" }, correctAnswer: 'c' },
            { question: "ما هو التركيز الأمثل للكحول لاستخدامه كمطهر فعال ضد الميكروبات؟", type: 'mc', answers: { a: "100%", b: "90%", c: "70%", d: "40%" }, correctAnswer: 'c' },
            { question: "مزرعة تحتوي على نوع واحد فقط من الميكروبات تسمى مزرعة نقية (Pure Culture).", type: 'tf', correctAnswer: 'true' },
            { question: "الخصائص الوراثية لتصنيف الميكروبات تعتمد على مقارنة:", type: 'mc', answers: { a: "شكل المستعمرات", b: "مكونات الجدار الخلوي", c: "الحامض النووي DNA", d: "نوع التغذية" }, correctAnswer: 'c' },
            { question: "المركبات الفينولية تستخدم كمواد كيميائية للسيطرة على الميكروبات.", type: 'tf', correctAnswer: 'true' },
            { question: "في التسلسل الهرمي للتصنيف، أي مرتبة أعلى من العائلة (Family)؟", type: 'mc', answers: { a: "الجنس (Genus)", b: "الرتبة (Order)", c: "النوع (Species)", d: "الشعبة (Phylum)" }, correctAnswer: 'b' },
            { question: "الخلايا بدائية النواة تحتوي على عضيات متخصصة مثل الميتوكوندريا.", type: 'tf', correctAnswer: 'false' },
            { question: "الكلور يعتبر من مجموعة ______ المستخدمة في التعقيم.", type: 'mc', answers: { a: "الكحولات", b: "الألدهيدات", c: "المعادن الثقيلة", d: "الهالوجينات" }, correctAnswer: 'd' },
            
            // Lecture 3 (10 questions)
            { question: "الأهداب (Pili) هي التركيب المسؤول بشكل أساسي عن حركة الخلية البكتيرية.", type: 'tf', correctAnswer: 'false' },
            { question: "تجمع البكتيريا الكروية على شكل سلسلة يسمى:", type: 'mc', answers: { a: "Staphylococci", b: "Streptococci", c: "Sarcinae", d: "Tetrads" }, correctAnswer: 'b' },
            { question: "ما هي الوظيفة الأساسية للكبسولة (Capsule) في البكتيريا الممرضة؟", type: 'mc', answers: { a: "توليد الطاقة", b: "الحركة", c: "الحماية من البلعمة", d: "تخزين الغذاء" }, correctAnswer: 'c' },
            { question: "الجراثيم (Spores) هي وسيلة البكتيريا لـ:", type: 'mc', answers: { a: "التكاثر السريع", b: "البقاء في الظروف القاسية", c: "تبادل المادة الوراثية", d: "الالتصاق" }, correctAnswer: 'b' },
            { question: "أي من توزيعات الأسواط التالية يعني وجود أسواط تحيط بجميع جوانب الخلية؟", type: 'mc', answers: { a: "Monotrichous", b: "Lophotrichous", c: "Amphitrichous", d: "Peritrichous" }, correctAnswer: 'd' },
            { question: "حامض التيكويك (Teichoic acid) هو مكون مميز لجدار الخلية في البكتيريا موجبة جرام.", type: 'tf', correctAnswer: 'true' },
            { question: "التركيب المسؤول عن تنظيم دخول وخروج المواد بشكل انتقائي هو الغشاء السيتوبلازمي.", type: 'tf', correctAnswer: 'true' },
            { question: "ما هي وظيفة الأهداب (Pili) المستخدمة في عملية الاقتران؟", type: 'mc', answers: { a: "الحركة", b: "الدفاع", c: "نقل المادة الوراثية", d: "التنفس" }, correctAnswer: 'c' },
            { question: "تجمع البكتيريا الكروية على شكل عنقود العنب يسمى Staphylococci.", type: 'tf', correctAnswer: 'true' },
            { question: "المادة النووية في البكتيريا (Nucleoid) تكون محاطة بغشاء نووي.", type: 'tf', correctAnswer: 'false' },

            // Lecture 4 (10 questions)
            { question: "البكتيريا التي تنمو في الينابيع الحارة تعتبر من النوع المحب للبرودة (Psychrophiles).", type: 'tf', correctAnswer: 'false' },
            { question: "ظاهرة 'البلزمة' (Plasmolysis) تحدث عند وضع خلية بكتيرية في وسط:", type: 'mc', answers: { a: "عالي التركيز", b: "منخفض التركيز", c: "متعادل التركيز", d: "حامضي" }, correctAnswer: 'a' },
            { question: "البكتيريا 'الهوائية الإجبارية' تموت في وجود الأكسجين.", type: 'tf', correctAnswer: 'false' },
            { question: "بكتيريا *E. coli* التي يمكنها العيش بوجود أو غياب الأكسجين تصنف على أنها:", type: 'mc', answers: { a: "هوائية إجبارية", b: "لا هوائية إجبارية", c: "هوائية اختيارية", d: "متحملة للهواء" }, correctAnswer: 'c' },
            { question: "أي من العبارات تصف البكتيريا 'ذاتية التغذية' (Autotrophs)؟", type: 'mc', answers: { a: "تحلل الكائنات الميتة.", b: "تتطفل على كائنات حية.", c: "تبني موادها من مصادر غير عضوية.", d: "تعتمد على النباتات كمصدر للغذاء." }, correctAnswer: 'c' },
            { question: "معظم البكتيريا الممرضة للإنسان تصنف ضمن مجموعة المحبة للحرارة المتوسطة (Mesophiles).", type: 'tf', correctAnswer: 'true' },
            { question: "بكتيريا تعتمد على الضوء كمصدر للطاقة تسمى:", type: 'mc', answers: { a: "Chemotrophs", b: "Saprophytes", c: "Phototrophs", d: "Parasites" }, correctAnswer: 'c' },
            { question: "الطول الموجي الأكثر تأثيراً على البكتيريا في الإشعاع فوق البنفسجي هو 2650 أنجستروم.", type: 'tf', correctAnswer: 'true' },
            { question: "البكتيريا التي تعيش في علاقة تبادل منفعة مع كائن آخر تسمى مترممة (Saprophytes).", type: 'tf', correctAnswer: 'false' },
            { question: "معظم أنواع البكتيريا تفضل النمو في وسط متعادل أو قلوي ضعيف.", type: 'tf', correctAnswer: 'true' },
            
            // Lecture 5 (10 questions)
            { question: "عمليات الهدم (Catabolism) هي عمليات بناء تستهلك الطاقة في الخلية.", type: 'tf', correctAnswer: 'false' },
            { question: "المركب الرئيسي الذي يعمل كـ 'عملة طاقة' مباشرة في الخلية هو:", type: 'mc', answers: { a: "DNA", b: "NADH", c: "ATP", d: "RNA" }, correctAnswer: 'c' },
            { question: "المركبات مثل NADH و NADPH تعمل في الخلية كـ:", type: 'mc', answers: { a: "مصدر مباشر للطاقة", b: "حاملات للقوة الاختزالية", c: "مكونات للجدار الخلوي", d: "إنزيمات هاضمة" }, correctAnswer: 'b' },
            { question: "عمليات البناء (Anabolism) هي المسؤولة عن تكسير الجزيئات الكبيرة لتوليد الطاقة.", type: 'tf', correctAnswer: 'false' },
            { question: "التنفس الحيوي هو جميع التفاعلات التي ينتج عنها انطلاق طاقة داخل الخلية.", type: 'tf', correctAnswer: 'true' },
            { question: "أي من التالي يمثل عملية بناء (Anabolism)؟", type: 'mc', answers: { a: "تحليل الجلوكوز لإنتاج ATP", b: "تكسير البروتينات إلى أحماض أمينية", c: "تخليق البروتين من الأحماض الأمينية", d: "هضم الدهون" }, correctAnswer: 'c' },
            { question: "الطاقة الناتجة في الخلية تخزن على هيئة روابط كيميائية غنية بالطاقة.", type: 'tf', correctAnswer: 'true' },
            { question: "التنفس الهوائي (Aerobic) يتطلب وجود الأكسجين.", type: 'tf', correctAnswer: 'true' },
            { question: "وظيفة أيض الميكروبات تقتصر على توليد الطاقة فقط.", type: 'tf', correctAnswer: 'false' },
            { question: "تعتبر المواد الكربوهيدراتية مصدر الطاقة الرئيسي للبكتيريا الممثلة للمواد العضوية.", type: 'tf', correctAnswer: 'true' }
        ];

        function buildQuiz() {
            const output = [];
            quizQuestions.forEach((currentQuestion, qNumber) => {
                const answers = [];
                if (currentQuestion.type === 'tf') {
                    answers.push(
                        `<label class="answer">
                            <input type="radio" name="question${qNumber}" value="true"> <span>صح</span>
                         </label>`,
                        `<label class="answer">
                            <input type="radio" name="question${qNumber}" value="false"> <span>خطأ</span>
                         </label>`
                    );
                } else if (currentQuestion.type === 'mc') {
                    for (let letter in currentQuestion.answers) {
                        answers.push(
                            `<label class="answer">
                                <input type="radio" name="question${qNumber}" value="${letter}">
                                <span>${currentQuestion.answers[letter]}</span>
                            </label>`
                        );
                    }
                }

                output.push(
                    `<div class="question-block" id="q${qNumber}">
                        <div class="question-header">${qNumber + 1}. ${currentQuestion.question}</div>
                        <div class="answers"> ${answers.join('')} </div>
                    </div>`
                );
            });
            quizContainer.innerHTML = output.join('');
            
            // Add progress update logic
            const allAnswerLabels = document.querySelectorAll('.answer');
            allAnswerLabels.forEach(label => {
                label.addEventListener('click', (e) => {
                    const input = label.querySelector('input');
                    const allLabelsForThisQuestion = document.querySelectorAll(`input[name=${input.name}]`);
                    allLabelsForThisQuestion.forEach(radio => {
                        radio.parentElement.classList.remove('selected');
                    });
                    label.classList.add('selected');
                    updateProgress();
                });
            });
        }
        
        function updateProgress(){
            const totalQuestions = quizQuestions.length;
            const answeredQuestions = document.querySelectorAll('input[type="radio"]:checked').length;
            const progressPercentage = (answeredQuestions / totalQuestions) * 100;
            progressBar.style.width = `${progressPercentage}%`;
            progressText.textContent = `${answeredQuestions} / ${totalQuestions}`;
        }

        function showResults() {
            quizContainer.style.display = 'none';
            resultsContainer.style.display = 'block';
            mistakesList.innerHTML = '';
            let numCorrect = 0;
            
            quizQuestions.forEach((currentQuestion, qNumber) => {
                const selector = `input[name=question${qNumber}]:checked`;
                const userAnswerNode = document.querySelector(selector);
                const userAnswer = userAnswerNode ? userAnswerNode.value : undefined;

                if (userAnswer === currentQuestion.correctAnswer) {
                    numCorrect++;
                } else {
                    const questionText = currentQuestion.question;
                    const incorrectAnswerText = userAnswer ? (currentQuestion.type === 'tf' ? (userAnswer === 'true' ? 'صح' : 'خطأ') : currentQuestion.answers[userAnswer]) : 'لم تتم الإجابة';
                    const correctAnswerText = currentQuestion.type === 'tf' ? (currentQuestion.correctAnswer === 'true' ? 'صح' : 'خطأ') : currentQuestion.answers[currentQuestion.correctAnswer];

                    const mistakeItem = document.createElement('div');
                    mistakeItem.className = 'mistake-item';
                    mistakeItem.innerHTML = `
                        <p><strong>السؤال:</strong> ${questionText}</p>
                        <p><strong>إجابتك:</strong> <span class="user-answer">${incorrectAnswerText}</span></p>
                        <p><strong>الإجابة الصحيحة:</strong> <span class="correct-answer">${correctAnswerText}</span></p>
                    `;
                    mistakesList.appendChild(mistakeItem);
                }
            });
            
            const score = Math.round((numCorrect / quizQuestions.length) * 100);
            
            if (numCorrect === quizQuestions.length) {
                resultsTitle.textContent = '🎉 علامة كاملة! أداء مذهل!';
                mistakesReview.style.display = 'none';
            } else if (score >= 80) {
                 resultsTitle.textContent = '👏 أداء رائع!';
                 mistakesReview.style.display = 'block';
            } else if (score >= 50) {
                 resultsTitle.textContent = '💪 جيد جداً!';
                 mistakesReview.style.display = 'block';
            } else {
                 resultsTitle.textContent = 'تحتاج للمزيد من المراجعة';
                 mistakesReview.style.display = 'block';
            }
            
            resultsText.textContent = `نتيجتك هي ${numCorrect} من ${quizQuestions.length} (${score}%)`;
            resultsSummary.className = score >= 50 ? 'results-summary results-correct' : 'results-summary results-incorrect';

            submitButton.disabled = true;
            submitButton.textContent = 'تم إظهار النتيجة';
            resultsContainer.scrollIntoView({ behavior: 'smooth' });
        }

        buildQuiz();
        submitButton.addEventListener('click', showResults);
    </script>
</body>
</html>